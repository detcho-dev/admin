<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - Books</title>
    <link rel="stylesheet" href="index.css" />
    <script type="module" src="index.js"></script>
  </head>
  <body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen">
      <div class="login-container">
        <h1>Admin Dashboard</h1>
        <input type="email" id="email" placeholder="Email" />
        <input type="password" id="password" placeholder="Password" />
        <button id="login-btn">Login</button>
        <p id="login-error" style="color: #ff4444; margin-top: 15px; display: none"></p>
      </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="screen" style="display: none">
      <header>
        <h1>Books Management</h1>
        <button id="logout-btn">Logout</button>
      </header>

      <div class="controls">
        <input type="text" id="search" placeholder="Search all fields..." />
        <button id="new-book-btn">New Book</button>
        <button id="refresh-btn">ðŸ”„ Refresh</button>
      </div>

      <table id="books-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Author</th>
            <th>Categories</th>
            <th>Cover</th>
            <th>Section</th>
            <th>Reads</th>
            <th>Purchase Text</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="table-body">
          <!-- Data will be loaded dynamically -->
        </tbody>
      </table>

      <div id="no-results" style="display: none; text-align: center; padding: 20px; color: #e0e0e0">
        <p>No books found.</p>
        <button id="create-with-id-btn" style="display: none; margin-top: 15px; padding: 8px 16px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer;">Create book with this ID</button>
      </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" style="
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #333;
      color: white;
      padding: 12px 20px;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 10000;
      transform: translateX(200%);
      transition: transform 0.3s ease;
    "></div>

    <!-- New Book Modal -->
    <div id="new-book-modal" class="modal">
      <div class="modal-content">
        <span class="close" id="close-new-modal">&times;</span>
        <h2>New Book</h2>
        <input type="text" id="new-id" placeholder="Document ID (Custom)" required />
        <input type="text" id="new-title" placeholder="Title" required />
        <input type="text" id="new-author" placeholder="Author" required />
        <input type="text" id="new-categories" placeholder="Categories (Comma Separated)" required />
        <div class="upload-container">
          <button type="button" id="cover-upload-btn" class="upload-btn">Upload Cover Image</button>
          <input type="file" id="cover-upload" accept="image/*" style="display: none;" />
          <div id="cover-preview" class="image-preview"></div>
        </div>
        <div class="upload-container">
          <button type="button" id="purchase-upload-btn" class="upload-btn">Upload Purchase PDF</button>
          <input type="file" id="purchase-upload" accept=".pdf" style="display: none;" />
          <div id="purchase-preview" class="file-preview"></div>
        </div>
        <select id="new-section" required>
          <option value="members">Members</option>
          <option value="readers">Readers</option>
        </select>
        <input type="number" id="new-reads" placeholder="Reads" min="0" required />
        <button id="add-book-btn">Add Book</button>
      </div>
    </div>

    <!-- Edit Book Modal -->
    <div id="edit-book-modal" class="modal">
      <div class="modal-content">
        <span class="close" id="close-edit-modal">&times;</span>
        <h2>Edit Book</h2>
        <input type="text" id="edit-id" readonly />
        <input type="text" id="edit-title" placeholder="Title" required />
        <input type="text" id="edit-author" placeholder="Author" required />
        <input type="text" id="edit-categories" placeholder="Categories (Comma Separated)" required />
        <div class="upload-container">
          <button type="button" id="edit-cover-upload-btn" class="upload-btn">Upload Cover Image</button>
          <input type="file" id="edit-cover-upload" accept="image/*" style="display: none;" />
          <div id="edit-cover-preview" class="image-preview"></div>
        </div>
        <div class="upload-container">
          <button type="button" id="edit-purchase-upload-btn" class="upload-btn">Upload Purchase PDF</button>
          <input type="file" id="edit-purchase-upload" accept=".pdf" style="display: none;" />
          <div id="edit-purchase-preview" class="file-preview"></div>
        </div>
        <select id="edit-section" required>
          <option value="members">Members</option>
          <option value="readers">Readers</option>
        </select>
        <input type="number" id="edit-reads" placeholder="Reads" min="0" required />
        <button id="update-book-btn">Save Changes</button>
      </div>
    </div>
  </body>
</html>
